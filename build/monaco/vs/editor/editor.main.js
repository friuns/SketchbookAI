define("vs/editor/editor.main",["exports","require","vs/nls.messages-loader!","../monaco.contribution-DO3azKX8","../monaco.contribution-qLAYrEOP","../monaco.contribution-EcChJV6a","../monaco.contribution-D2OdxNBt","../basic-languages/monaco.contribution","../editor.api-CalNCsUg","../workers-DcJshg-q"],(function(e,t,n,i,r,o,s,a,c,l){"use strict";const d=function(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e)for(const n in e)if("default"!==n){const i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:()=>e[n]})}return t.default=e,Object.freeze(t)}(t),u=""+new URL(t.toUrl("../assets/json.worker-DKiEKt88.js"),document.baseURI).href,g=""+new URL(t.toUrl("../assets/css.worker-HnVq6Ewq.js"),document.baseURI).href,m=""+new URL(t.toUrl("../assets/html.worker-B51mlPHg.js"),document.baseURI).href,h=""+new URL(t.toUrl("../assets/ts.worker-CMbG-7ft.js"),document.baseURI).href,p=""+new URL(t.toUrl("../assets/editor.worker-Be8ye1pW.js"),document.baseURI).href;var _,D;(_||(_={})).create=function(e){return e},function(e){function t(e){return-32099<=e&&e<=-32e3}e.parseError=-32700,e.invalidRequest=-32600,e.methodNotFound=-32601,e.invalidParams=-32602,e.internalError=-32603,e.isServerError=t,e.serverError=function(e){if(!t(e))throw new Error("Invalid range for a server error.");return e},e.unexpectedServerError=-32e3,e.isApplicationError=function(e){return!0},e.applicationError=function(e){return e},e.genericApplicationError=-320100}(D||(D={}));var w=class{listeners=new Set;event=e=>(this.listeners.add(e),{dispose:()=>{this.listeners.delete(e)}});fire(e){this.listeners.forEach((t=>t(e)))}},x=class{_value;eventEmitter;constructor(e){this._value=e,this.eventEmitter=new w}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,this.eventEmitter.fire(e))}get onChange(){return this.eventEmitter.event}};function f(e,t,n){return e instanceof Set?(e.add(t),{dispose:()=>e.delete(t)}):(e.set(t,n),{dispose:()=>e.delete(t)})}var y,b,v=class{_state="none";promise;resolve=()=>{};reject=()=>{};constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}get state(){return this._state}},S=class e{static id=0;_unprocessedMessages=[];_messageListener;id=e.id++;_state=new x({state:"open"});state=this._state;setListener(e){if(this._messageListener=e,e)for(;this._unprocessedMessages.length>0&&void 0!==this._messageListener;){const e=this._unprocessedMessages.shift();this._messageListener(e)}}send(e){return this._sendImpl(e)}_dispatchReceivedMessage(e){0===this._unprocessedMessages.length&&this._messageListener?this._messageListener(e):this._unprocessedMessages.push(e)}_onConnectionClosed(){this._state.value={state:"closed",error:void 0}}log(e){return new C(this,e??new k)}},C=class{baseStream;logger;constructor(e,t){this.baseStream=e,this.logger=t}get state(){return this.baseStream.state}setListener(e){void 0!==e?this.baseStream.setListener((t=>{this.logger.log(this.baseStream,"incoming",t),e(t)})):this.baseStream.setListener(void 0)}send(e){return this.logger.log(this.baseStream,"outgoing",e),this.baseStream.send(e)}toString(){return`StreamLogger/${this.baseStream.toString()}`}},k=class{log(e,t,n){console.log(`${"incoming"===t?"<-":"->"} [${e.toString()}] ${JSON.stringify(n)}`)}},R=class e{connect;constructor(e){this.connect=e}mapContext(t){return new e((e=>this.connect(e?function(e,t){return{handleNotification:(n,i)=>e.handleNotification(n,t(i)),handleRequest:(n,i,r)=>e.handleRequest(n,i,t(r))}}(e,t):void 0)))}},T=class e{_stream;_listener;_logger;static createChannel(t,n){let i=!1;return new R((r=>{if(i)throw new Error(`A channel to the stream ${t} was already constructed!`);return i=!0,new e(t,r,n)}))}_unprocessedResponses=new Map;_lastUsedRequestId=0;constructor(e,t,n){this._stream=e,this._listener=t,this._logger=n,this._stream.setListener((e=>{void 0===e.method?this._processResponse(e):void 0===e.id?this._processNotification(e):this._processRequest(e)}))}get state(){return this._stream.state}async _processNotification(e){if(void 0!==e.id)throw new Error;if(this._listener)try{await this._listener.handleNotification({method:e.method,params:e.params||null})}catch(t){this._logger&&this._logger.warn({text:`Exception was thrown while handling notification: ${t}`,exception:t,message:e})}else this._logger&&this._logger.debug({text:"Notification ignored",message:e})}async _processRequest(e){if(void 0===e.id)throw new Error;let t,n;if(this._listener)try{t=await this._listener.handleRequest({method:e.method,params:e.params||null},e.id)}catch(n){this._logger&&this._logger.warn({text:`Exception was thrown while handling request: ${n}`,message:e,exception:n}),t={error:{code:D.internalError,message:"An unexpected exception was thrown.",data:void 0}}}else this._logger&&this._logger.debug({text:"Received request even though not listening for requests",message:e}),t={error:{code:D.methodNotFound,message:"This endpoint does not listen for requests or notifications.",data:void 0}};n="result"in t?{jsonrpc:"2.0",id:e.id,result:t.result}:{jsonrpc:"2.0",id:e.id,error:t.error},await this._stream.send(n)}_processResponse(e){const t=""+e.id,n=this._unprocessedResponses.get(t);n?(this._unprocessedResponses.delete(t),n(e)):this._logger&&this._logger.debug({text:"Got an unexpected response message",message:e})}_newRequestId(){return this._lastUsedRequestId++}sendRequest(e,t,n){const i={jsonrpc:"2.0",id:this._newRequestId(),method:e.method,params:e.params||void 0};return n&&n(i.id),new Promise(((e,t)=>{const n=""+i.id;this._unprocessedResponses.set(n,(n=>{"result"in n?e({result:n.result}):(n.error||t(new Error("Response had neither 'result' nor 'error' field set.")),e({error:n.error}))})),this._stream.send(i).then(void 0,(e=>{this._unprocessedResponses.delete(n),t(e)}))}))}sendNotification(e,t){const n={jsonrpc:"2.0",id:void 0,method:e.method,params:e.params||void 0};return this._stream.send(n)}toString(){return"StreamChannel/"+this._stream.toString()}};(b=y||(y={})).sAny=function(){return{deserializeFromJson:e=>({hasErrors:!1,value:e}),serializeToJson:e=>e}},b.sEmptyObject=function(){return{deserializeFromJson:e=>({hasErrors:!1,value:{}}),serializeToJson:e=>({})}},b.sVoidFromNull=function(){return{deserializeFromJson:e=>({hasErrors:!1,value:void 0}),serializeToJson:e=>null}};const I=Symbol("OptionalMethodNotFound");var E=class{contextualize(e){return new M(this,e)}},M=class extends E{underylingTypedChannel;converters;constructor(e,t){super(),this.underylingTypedChannel=e,this.converters=t}async request(e,t,n){const i=await this.converters.getSendContext(n);return this.underylingTypedChannel.request(e,t,i)}async notify(e,t,n){const i=await this.converters.getSendContext(n);return this.underylingTypedChannel.notify(e,t,i)}registerNotificationHandler(e,t){return this.underylingTypedChannel.registerNotificationHandler(e,(async(e,n)=>await t(e,await this.converters.getNewContext(n))))}registerRequestHandler(e,t){return this.underylingTypedChannel.registerRequestHandler(e,(async(e,n,i)=>await t(e,n,await this.converters.getNewContext(i))))}},P=class e extends E{channelCtor;static fromTransport(t,n={}){return new e(T.createChannel(t,n.logger),n)}_requestSender=void 0;_handler=new Map;_unknownNotificationHandler=new Set;_timeout;sendExceptionDetails=!1;_logger;constructor(e,t={}){super(),this.channelCtor=e,this._logger=t.logger,this.sendExceptionDetails=!!t.sendExceptionDetails,this._timeout=function(e,t){const n=setTimeout(t,1e3);return{dispose:()=>clearTimeout(n)}}(0,(()=>{this._requestSender||console.warn(`"${this.startListen.name}" has not been called within 1 second after construction of this channel. Did you forget to call it?`,this)}))}listeningDeferred=new v;onListening=this.listeningDeferred.promise;_requestDidErrorEventEmitter=new w;onRequestDidError=this._requestDidErrorEventEmitter.event;startListen(){if(this._requestSender)throw new Error(`"${this.startListen.name}" can be called only once, but it already has been called.`);this._timeout&&(this._timeout.dispose(),this._timeout=void 0),this._requestSender=this.channelCtor.connect({handleRequest:(e,t,n)=>this.handleRequest(e,t,n),handleNotification:(e,t)=>this.handleNotification(e,t)}),this.listeningDeferred.resolve()}checkChannel(e){if(!e)throw new Error(`"${this.startListen.name}" must be called before any messages can be sent or received.`);return!0}async handleRequest(e,t,n){const i=this._handler.get(e.method);if(!i)return this._logger&&this._logger.debug({text:`No request handler for "${e.method}".`,data:{requestObject:e}}),{error:{code:D.methodNotFound,message:`No request handler for "${e.method}".`,data:{method:e.method}}};if("request"!=i.kind){const t=`"${e.method}" is registered as notification, but was sent as request.`;return this._logger&&this._logger.debug({text:t,data:{requestObject:e}}),{error:{code:D.invalidRequest,message:t,data:{method:e.method}}}}const r=i.requestType.paramsSerializer.deserializeFromJson(e.params);if(r.hasErrors){const t=`Got invalid params: ${r.errorMessage}`;return this._logger&&this._logger.debug({text:t,data:{requestObject:e,errorMessage:r.errorMessage}}),{error:{code:D.invalidParams,message:t,data:{errors:r.errorMessage}}}}{const o=r.value;let s;try{const e=await i.handler(o,t,n);if("error"in e||"errorMessage"in e){const t=e.error?i.requestType.errorSerializer.serializeToJson(e.error):void 0;s={error:{code:e.errorCode||D.genericApplicationError,message:e.errorMessage||"An error was returned",data:t}}}else s={result:i.requestType.resultSerializer.serializeToJson(e.ok)}}catch(t){t instanceof F?s={error:{code:t.code,message:t.message}}:(this._logger&&this._logger.warn({text:`An exception was thrown while handling a request: ${t}.`,exception:t,data:{requestObject:e}}),s={error:{code:D.unexpectedServerError,message:this.sendExceptionDetails?`An exception was thrown while handling a request: ${t}.`:"Server has thrown an unexpected exception"}})}return s}}async handleNotification(e,t){const n=this._handler.get(e.method);if(!n){for(const t of this._unknownNotificationHandler)t(e);return void(0===this._unknownNotificationHandler.size&&this._logger&&this._logger.debug({text:`Unhandled notification "${e.method}"`,data:{requestObject:e}}))}if("notification"!=n.kind)return void(this._logger&&this._logger.debug({text:`"${e.method}" is registered as request, but was sent as notification.`,data:{requestObject:e}}));const i=n.notificationType.paramsSerializer.deserializeFromJson(e.params);if(i.hasErrors)return void(this._logger&&this._logger.debug({text:`Got invalid params: ${i}`,data:{requestObject:e,errorMessage:i.errorMessage}}));const r=i.value;for(const i of n.handlers)try{i(r,t)}catch(t){this._logger&&this._logger.warn({text:`An exception was thrown while handling a notification: ${t}.`,exception:t,data:{requestObject:e}})}}registerUnknownNotificationHandler(e){return f(this._unknownNotificationHandler,e)}registerRequestHandler(e,t){if(this._handler.get(e.method))throw new Error(`Handler with method "${e.method}" already registered.`);return f(this._handler,e.method,{kind:"request",requestType:e,handler:t})}registerNotificationHandler(e,t){let n=this._handler.get(e.method);if(n){if("notification"!==n.kind)throw new Error(`Method "${e.method}" was already registered as request handler.`);if(n.notificationType!==e)throw new Error(`Method "${e.method}" was registered for a different type.`)}else n={kind:"notification",notificationType:e,handlers:new Set},this._handler.set(e.method,n);return f(n.handlers,t)}getRegisteredTypes(){const e=[];for(const t of this._handler.values())"notification"===t.kind?e.push(t.notificationType):"request"===t.kind&&e.push(t.requestType);return e}async request(e,t,n){if(!this.checkChannel(this._requestSender))throw new Error("Impossible");const i=e.paramsSerializer.serializeToJson(t);H(i);const r=await this._requestSender.sendRequest({method:e.method,params:i},n);if("error"in r){if(e.isOptional&&r.error.code===D.methodNotFound)return I;let t;if(void 0!==r.error.data){const n=e.errorSerializer.deserializeFromJson(r.error.data);if(n.hasErrors)throw new Error(n.errorMessage);t=n.value}else t=void 0;const n=new F(r.error.message,t,r.error.code);throw this._requestDidErrorEventEmitter.fire({error:n}),n}{const t=e.resultSerializer.deserializeFromJson(r.result);if(t.hasErrors)throw new Error("Could not deserialize response: "+t.errorMessage+`\n\n${JSON.stringify(r,null,2)}`);return t.value}}async notify(e,t,n){if(!this.checkChannel(this._requestSender))throw new Error;const i=e.paramsSerializer.serializeToJson(t);H(i),this._requestSender.sendNotification({method:e.method,params:i},n)}};function H(e){if(null!==e&&Array.isArray(e)&&"object"!=typeof e)throw new Error("Invalid value! Only null, array and object is allowed.")}var F=class e extends Error{data;code;constructor(t,n,i=D.genericApplicationError){super(t),this.data=n,this.code=i,Object.setPrototypeOf(this,e.prototype)}},L=class e{method;paramsSerializer;resultSerializer;errorSerializer;isOptional;kind="request";constructor(e,t,n,i,r=!1){this.method=e,this.paramsSerializer=t,this.resultSerializer=n,this.errorSerializer=i,this.isOptional=r}withMethod(t){return new e(t,this.paramsSerializer,this.resultSerializer,this.errorSerializer)}optional(){return new e(this.method,this.paramsSerializer,this.resultSerializer,this.errorSerializer,!0)}},K=class e{method;paramsSerializer;kind="notification";constructor(e,t){this.method=e,this.paramsSerializer=t}withMethod(t){return new e(t,this.paramsSerializer)}};function O(e){return new L((e||{}).method,y.sAny(),y.sAny(),y.sAny())}function q(e){return new K((e||{}).method,y.sAny())}const A=Symbol();var N=class e{error;static factory=t=>new e(t);[A];constructor(e){this.error=e}};function z(e){const t={};for(const[n,i]of Object.entries(e)){const e=i.method?i.method:n;t[n]=i.withMethod(e)}return t}var W=class e{tags;server;client;_onlyDesignTime(){return new Error("This property is not meant to be accessed at runtime")}get TContractObject(){throw this._onlyDesignTime()}get TClientInterface(){throw this._onlyDesignTime()}get TServerInterface(){throw this._onlyDesignTime()}get TClientHandler(){throw this._onlyDesignTime()}get TServerHandler(){throw this._onlyDesignTime()}get TTags(){throw this._onlyDesignTime()}constructor(e=[],t,n){this.tags=e,this.server=t,this.client=n}getInterface(e,t,n,i){const r=this.buildCounterpart(e,n),o=this.registerHandlers(e,t,i,r);return{counterpart:r,dispose:()=>o.dispose()}}buildCounterpart(e,t){const n={};for(const[i,r]of Object.entries(t)){let t;t="request"===r.kind?r.isOptional?async(t,n)=>{void 0===t&&(t={});try{return await e.request(r,t,n)}catch(e){if(e&&e.code===D.methodNotFound)return I;throw e}}:(t,n)=>(void 0===t&&(t={}),e.request(r,t,n)):(t,n)=>(void 0===t&&(t={}),e.notify(r,t,n)),n[i]=t}return n}registerHandlers(e,t,n,i){const r=[];for(const[o,s]of Object.entries(t))if("request"===s.kind){let t=n[o];if(!t)continue;const a=this.createRequestHandler(i,t);r.push(e.registerRequestHandler(s,a))}else{const t=n[o];t&&r.push(e.registerNotificationHandler(s,((e,n)=>{t(e,{context:n,counterpart:i})})))}return{dispose:()=>r.forEach((e=>e.dispose()))}}createRequestHandler(e,t){return async(n,i,r)=>{const o=await t(n,{context:r,counterpart:e,newErr:N.factory,requestId:i});return o instanceof N?o.error:{ok:o}}}static getServerFromStream(e,t,n,i){const r=P.fromTransport(t,n),{server:o}=e.getServer(r,i);return r.startListen(),{channel:r,server:o}}static registerServerToStream(e,t,n,i){const r=P.fromTransport(t,n),{client:o}=e.registerServer(r,i);return r.startListen(),{channel:r,client:o}}getServer(e,t){const{counterpart:n,dispose:i}=this.getInterface(e,this.client,this.server,t);return{server:n,dispose:i}}registerServer(e,t){const{counterpart:n,dispose:i}=this.getInterface(e,this.server,this.client,t);return{client:n,dispose:i}}withContext(){return new e(this.tags,this.server,this.client)}};let j=function(e){return e.Comment="comment",e.Imports="imports",e.Region="region",e}({}),U=function(e){return e[e.File=1]="File",e[e.Module=2]="Module",e[e.Namespace=3]="Namespace",e[e.Package=4]="Package",e[e.Class=5]="Class",e[e.Method=6]="Method",e[e.Property=7]="Property",e[e.Field=8]="Field",e[e.Constructor=9]="Constructor",e[e.Enum=10]="Enum",e[e.Interface=11]="Interface",e[e.Function=12]="Function",e[e.Variable=13]="Variable",e[e.Constant=14]="Constant",e[e.String=15]="String",e[e.Number=16]="Number",e[e.Boolean=17]="Boolean",e[e.Array=18]="Array",e[e.Object=19]="Object",e[e.Key=20]="Key",e[e.Null=21]="Null",e[e.EnumMember=22]="EnumMember",e[e.Struct=23]="Struct",e[e.Event=24]="Event",e[e.Operator=25]="Operator",e[e.TypeParameter=26]="TypeParameter",e}({}),$=function(e){return e[e.Deprecated=1]="Deprecated",e}({}),B=function(e){return e[e.Type=1]="Type",e[e.Parameter=2]="Parameter",e}({}),V=function(e){return e[e.None=0]="None",e[e.Full=1]="Full",e[e.Incremental=2]="Incremental",e}({}),J=function(e){return e[e.Text=1]="Text",e[e.Method=2]="Method",e[e.Function=3]="Function",e[e.Constructor=4]="Constructor",e[e.Field=5]="Field",e[e.Variable=6]="Variable",e[e.Class=7]="Class",e[e.Interface=8]="Interface",e[e.Module=9]="Module",e[e.Property=10]="Property",e[e.Unit=11]="Unit",e[e.Value=12]="Value",e[e.Enum=13]="Enum",e[e.Keyword=14]="Keyword",e[e.Snippet=15]="Snippet",e[e.Color=16]="Color",e[e.File=17]="File",e[e.Reference=18]="Reference",e[e.Folder=19]="Folder",e[e.EnumMember=20]="EnumMember",e[e.Constant=21]="Constant",e[e.Struct=22]="Struct",e[e.Event=23]="Event",e[e.Operator=24]="Operator",e[e.TypeParameter=25]="TypeParameter",e}({}),G=function(e){return e[e.Deprecated=1]="Deprecated",e}({}),Q=function(e){return e[e.PlainText=1]="PlainText",e[e.Snippet=2]="Snippet",e}({}),X=function(e){return e[e.Text=1]="Text",e[e.Read=2]="Read",e[e.Write=3]="Write",e}({}),Y=function(e){return e.Empty="",e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports",e.SourceFixAll="source.fixAll",e}({}),Z=function(e){return e.PlainText="plaintext",e.Markdown="markdown",e}({}),ee=function(e){return e[e.Error=1]="Error",e[e.Warning=2]="Warning",e[e.Information=3]="Information",e[e.Hint=4]="Hint",e}({}),te=function(e){return e[e.Unnecessary=1]="Unnecessary",e[e.Deprecated=2]="Deprecated",e}({}),ne=function(e){return e[e.Invoked=1]="Invoked",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.TriggerForIncompleteCompletions=3]="TriggerForIncompleteCompletions",e}({}),ie=function(e){return e[e.Invoked=1]="Invoked",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange",e}({}),re=function(e){return e[e.Invoked=1]="Invoked",e[e.Automatic=2]="Automatic",e}({}),oe=function(e){return e.Relative="relative",e}({});var se=class{constructor(e){this.method=e}};const ae={textDocumentImplementation:new se("textDocument/implementation"),textDocumentTypeDefinition:new se("textDocument/typeDefinition"),textDocumentDocumentColor:new se("textDocument/documentColor"),textDocumentColorPresentation:new se("textDocument/colorPresentation"),textDocumentFoldingRange:new se("textDocument/foldingRange"),textDocumentDeclaration:new se("textDocument/declaration"),textDocumentSelectionRange:new se("textDocument/selectionRange"),textDocumentPrepareCallHierarchy:new se("textDocument/prepareCallHierarchy"),textDocumentSemanticTokensFull:new se("textDocument/semanticTokens/full"),textDocumentSemanticTokensFullDelta:new se("textDocument/semanticTokens/full/delta"),textDocumentLinkedEditingRange:new se("textDocument/linkedEditingRange"),workspaceWillCreateFiles:new se("workspace/willCreateFiles"),workspaceWillRenameFiles:new se("workspace/willRenameFiles"),workspaceWillDeleteFiles:new se("workspace/willDeleteFiles"),textDocumentMoniker:new se("textDocument/moniker"),textDocumentPrepareTypeHierarchy:new se("textDocument/prepareTypeHierarchy"),textDocumentInlineValue:new se("textDocument/inlineValue"),textDocumentInlayHint:new se("textDocument/inlayHint"),textDocumentDiagnostic:new se("textDocument/diagnostic"),textDocumentInlineCompletion:new se("textDocument/inlineCompletion"),textDocumentWillSaveWaitUntil:new se("textDocument/willSaveWaitUntil"),textDocumentCompletion:new se("textDocument/completion"),textDocumentHover:new se("textDocument/hover"),textDocumentSignatureHelp:new se("textDocument/signatureHelp"),textDocumentDefinition:new se("textDocument/definition"),textDocumentReferences:new se("textDocument/references"),textDocumentDocumentHighlight:new se("textDocument/documentHighlight"),textDocumentDocumentSymbol:new se("textDocument/documentSymbol"),textDocumentCodeAction:new se("textDocument/codeAction"),workspaceSymbol:new se("workspace/symbol"),textDocumentCodeLens:new se("textDocument/codeLens"),textDocumentDocumentLink:new se("textDocument/documentLink"),textDocumentFormatting:new se("textDocument/formatting"),textDocumentRangeFormatting:new se("textDocument/rangeFormatting"),textDocumentRangesFormatting:new se("textDocument/rangesFormatting"),textDocumentOnTypeFormatting:new se("textDocument/onTypeFormatting"),textDocumentRename:new se("textDocument/rename"),workspaceExecuteCommand:new se("workspace/executeCommand"),workspaceDidCreateFiles:new se("workspace/didCreateFiles"),workspaceDidRenameFiles:new se("workspace/didRenameFiles"),workspaceDidDeleteFiles:new se("workspace/didDeleteFiles"),workspaceDidChangeConfiguration:new se("workspace/didChangeConfiguration"),textDocumentDidOpen:new se("textDocument/didOpen"),textDocumentDidChange:new se("textDocument/didChange"),textDocumentDidClose:new se("textDocument/didClose"),textDocumentDidSave:new se("textDocument/didSave"),textDocumentWillSave:new se("textDocument/willSave"),workspaceDidChangeWatchedFiles:new se("workspace/didChangeWatchedFiles")},ce=function(e){const t=z(e.server),n=z(e.client);return new W(e.tags||[],t,n)}({server:{textDocumentImplementation:O({method:"textDocument/implementation"}),textDocumentTypeDefinition:O({method:"textDocument/typeDefinition"}),textDocumentDocumentColor:O({method:"textDocument/documentColor"}),textDocumentColorPresentation:O({method:"textDocument/colorPresentation"}),textDocumentFoldingRange:O({method:"textDocument/foldingRange"}),textDocumentDeclaration:O({method:"textDocument/declaration"}),textDocumentSelectionRange:O({method:"textDocument/selectionRange"}),textDocumentPrepareCallHierarchy:O({method:"textDocument/prepareCallHierarchy"}),callHierarchyIncomingCalls:O({method:"callHierarchy/incomingCalls"}),callHierarchyOutgoingCalls:O({method:"callHierarchy/outgoingCalls"}),textDocumentSemanticTokensFull:O({method:"textDocument/semanticTokens/full"}),textDocumentSemanticTokensFullDelta:O({method:"textDocument/semanticTokens/full/delta"}),textDocumentSemanticTokensRange:O({method:"textDocument/semanticTokens/range"}),textDocumentLinkedEditingRange:O({method:"textDocument/linkedEditingRange"}),workspaceWillCreateFiles:O({method:"workspace/willCreateFiles"}),workspaceWillRenameFiles:O({method:"workspace/willRenameFiles"}),workspaceWillDeleteFiles:O({method:"workspace/willDeleteFiles"}),textDocumentMoniker:O({method:"textDocument/moniker"}),textDocumentPrepareTypeHierarchy:O({method:"textDocument/prepareTypeHierarchy"}),typeHierarchySupertypes:O({method:"typeHierarchy/supertypes"}),typeHierarchySubtypes:O({method:"typeHierarchy/subtypes"}),textDocumentInlineValue:O({method:"textDocument/inlineValue"}),textDocumentInlayHint:O({method:"textDocument/inlayHint"}),inlayHintResolve:O({method:"inlayHint/resolve"}),textDocumentDiagnostic:O({method:"textDocument/diagnostic"}),workspaceDiagnostic:O({method:"workspace/diagnostic"}),textDocumentInlineCompletion:O({method:"textDocument/inlineCompletion"}),initialize:O({method:"initialize"}),shutdown:O({method:"shutdown"}),textDocumentWillSaveWaitUntil:O({method:"textDocument/willSaveWaitUntil"}),textDocumentCompletion:O({method:"textDocument/completion"}),completionItemResolve:O({method:"completionItem/resolve"}),textDocumentHover:O({method:"textDocument/hover"}),textDocumentSignatureHelp:O({method:"textDocument/signatureHelp"}),textDocumentDefinition:O({method:"textDocument/definition"}),textDocumentReferences:O({method:"textDocument/references"}),textDocumentDocumentHighlight:O({method:"textDocument/documentHighlight"}),textDocumentDocumentSymbol:O({method:"textDocument/documentSymbol"}),textDocumentCodeAction:O({method:"textDocument/codeAction"}),codeActionResolve:O({method:"codeAction/resolve"}),workspaceSymbol:O({method:"workspace/symbol"}),workspaceSymbolResolve:O({method:"workspaceSymbol/resolve"}),textDocumentCodeLens:O({method:"textDocument/codeLens"}),codeLensResolve:O({method:"codeLens/resolve"}),textDocumentDocumentLink:O({method:"textDocument/documentLink"}),documentLinkResolve:O({method:"documentLink/resolve"}),textDocumentFormatting:O({method:"textDocument/formatting"}),textDocumentRangeFormatting:O({method:"textDocument/rangeFormatting"}),textDocumentRangesFormatting:O({method:"textDocument/rangesFormatting"}),textDocumentOnTypeFormatting:O({method:"textDocument/onTypeFormatting"}),textDocumentRename:O({method:"textDocument/rename"}),textDocumentPrepareRename:O({method:"textDocument/prepareRename"}),workspaceExecuteCommand:O({method:"workspace/executeCommand"}),workspaceDidChangeWorkspaceFolders:q({method:"workspace/didChangeWorkspaceFolders"}),windowWorkDoneProgressCancel:q({method:"window/workDoneProgress/cancel"}),workspaceDidCreateFiles:q({method:"workspace/didCreateFiles"}),workspaceDidRenameFiles:q({method:"workspace/didRenameFiles"}),workspaceDidDeleteFiles:q({method:"workspace/didDeleteFiles"}),notebookDocumentDidOpen:q({method:"notebookDocument/didOpen"}),notebookDocumentDidChange:q({method:"notebookDocument/didChange"}),notebookDocumentDidSave:q({method:"notebookDocument/didSave"}),notebookDocumentDidClose:q({method:"notebookDocument/didClose"}),initialized:q({method:"initialized"}),exit:q({method:"exit"}),workspaceDidChangeConfiguration:q({method:"workspace/didChangeConfiguration"}),textDocumentDidOpen:q({method:"textDocument/didOpen"}),textDocumentDidChange:q({method:"textDocument/didChange"}),textDocumentDidClose:q({method:"textDocument/didClose"}),textDocumentDidSave:q({method:"textDocument/didSave"}),textDocumentWillSave:q({method:"textDocument/willSave"}),workspaceDidChangeWatchedFiles:q({method:"workspace/didChangeWatchedFiles"}),setTrace:q({method:"$/setTrace"}),cancelRequest:q({method:"$/cancelRequest"}),progress:q({method:"$/progress"})},client:{workspaceWorkspaceFolders:O({method:"workspace/workspaceFolders"}).optional(),workspaceConfiguration:O({method:"workspace/configuration"}).optional(),workspaceFoldingRangeRefresh:O({method:"workspace/foldingRange/refresh"}).optional(),windowWorkDoneProgressCreate:O({method:"window/workDoneProgress/create"}).optional(),workspaceSemanticTokensRefresh:O({method:"workspace/semanticTokens/refresh"}).optional(),windowShowDocument:O({method:"window/showDocument"}).optional(),workspaceInlineValueRefresh:O({method:"workspace/inlineValue/refresh"}).optional(),workspaceInlayHintRefresh:O({method:"workspace/inlayHint/refresh"}).optional(),workspaceDiagnosticRefresh:O({method:"workspace/diagnostic/refresh"}).optional(),clientRegisterCapability:O({method:"client/registerCapability"}).optional(),clientUnregisterCapability:O({method:"client/unregisterCapability"}).optional(),windowShowMessageRequest:O({method:"window/showMessageRequest"}).optional(),workspaceCodeLensRefresh:O({method:"workspace/codeLens/refresh"}).optional(),workspaceApplyEdit:O({method:"workspace/applyEdit"}).optional(),windowShowMessage:q({method:"window/showMessage"}),windowLogMessage:q({method:"window/logMessage"}),telemetryEvent:q({method:"telemetry/event"}),textDocumentPublishDiagnostics:q({method:"textDocument/publishDiagnostics"}),logTrace:q({method:"$/logTrace"}),cancelRequest:q({method:"$/cancelRequest"}),progress:q({method:"$/progress"})}});function le(e,t){if(e.textModel!==t)throw new Error(`Expected text model to be ${t}, but got ${e.textModel}`);return e}var de=class{static None=Object.freeze({dispose(){}});_store=new ue;constructor(){}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}},ue=class{static DISABLE_DISPOSED_WARNING=!1;_toDispose=new Set;_isDisposed=!1;dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}clear(){if(0!==this._toDispose.size)try{for(const e of this._toDispose)e.dispose()}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}};const ge=new Map([[Y.Empty,""],[Y.QuickFix,"quickfix"],[Y.Refactor,"refactor"],[Y.RefactorExtract,"refactor.extract"],[Y.RefactorInline,"refactor.inline"],[Y.RefactorRewrite,"refactor.rewrite"],[Y.Source,"source"],[Y.SourceOrganizeImports,"source.organizeImports"],[Y.SourceFixAll,"source.fixAll"]]);function me(e){if(e)return ge.get(e)??e}const he=new Map([[c.languages.CodeActionTriggerType.Invoke,re.Invoked],[c.languages.CodeActionTriggerType.Auto,re.Automatic]]);function pe(e){return he.get(e)??re.Invoked}const _e=new Map([[J.Text,c.languages.CompletionItemKind.Text],[J.Method,c.languages.CompletionItemKind.Method],[J.Function,c.languages.CompletionItemKind.Function],[J.Constructor,c.languages.CompletionItemKind.Constructor],[J.Field,c.languages.CompletionItemKind.Field],[J.Variable,c.languages.CompletionItemKind.Variable],[J.Class,c.languages.CompletionItemKind.Class],[J.Interface,c.languages.CompletionItemKind.Interface],[J.Module,c.languages.CompletionItemKind.Module],[J.Property,c.languages.CompletionItemKind.Property],[J.Unit,c.languages.CompletionItemKind.Unit],[J.Value,c.languages.CompletionItemKind.Value],[J.Enum,c.languages.CompletionItemKind.Enum],[J.Keyword,c.languages.CompletionItemKind.Keyword],[J.Snippet,c.languages.CompletionItemKind.Snippet],[J.Color,c.languages.CompletionItemKind.Color],[J.File,c.languages.CompletionItemKind.File],[J.Reference,c.languages.CompletionItemKind.Reference],[J.Folder,c.languages.CompletionItemKind.Folder],[J.EnumMember,c.languages.CompletionItemKind.EnumMember],[J.Constant,c.languages.CompletionItemKind.Constant],[J.Struct,c.languages.CompletionItemKind.Struct],[J.Event,c.languages.CompletionItemKind.Event],[J.Operator,c.languages.CompletionItemKind.Operator],[J.TypeParameter,c.languages.CompletionItemKind.TypeParameter]]);function De(e){return e?_e.get(e)??c.languages.CompletionItemKind.Text:c.languages.CompletionItemKind.Text}const we=new Map([[G.Deprecated,c.languages.CompletionItemTag.Deprecated]]);function xe(e){return we.get(e)}const fe=new Map([[c.languages.CompletionTriggerKind.Invoke,ne.Invoked],[c.languages.CompletionTriggerKind.TriggerCharacter,ne.TriggerCharacter],[c.languages.CompletionTriggerKind.TriggerForIncompleteCompletions,ne.TriggerForIncompleteCompletions]]);function ye(e){return fe.get(e)??ne.Invoked}const be=new Map([[Q.Snippet,c.languages.CompletionItemInsertTextRule.InsertAsSnippet]]),ve=new Map([[U.File,c.languages.SymbolKind.File],[U.Module,c.languages.SymbolKind.Module],[U.Namespace,c.languages.SymbolKind.Namespace],[U.Package,c.languages.SymbolKind.Package],[U.Class,c.languages.SymbolKind.Class],[U.Method,c.languages.SymbolKind.Method],[U.Property,c.languages.SymbolKind.Property],[U.Field,c.languages.SymbolKind.Field],[U.Constructor,c.languages.SymbolKind.Constructor],[U.Enum,c.languages.SymbolKind.Enum],[U.Interface,c.languages.SymbolKind.Interface],[U.Function,c.languages.SymbolKind.Function],[U.Variable,c.languages.SymbolKind.Variable],[U.Constant,c.languages.SymbolKind.Constant],[U.String,c.languages.SymbolKind.String],[U.Number,c.languages.SymbolKind.Number],[U.Boolean,c.languages.SymbolKind.Boolean],[U.Array,c.languages.SymbolKind.Array],[U.Object,c.languages.SymbolKind.Object],[U.Key,c.languages.SymbolKind.Key],[U.Null,c.languages.SymbolKind.Null],[U.EnumMember,c.languages.SymbolKind.EnumMember],[U.Struct,c.languages.SymbolKind.Struct],[U.Event,c.languages.SymbolKind.Event],[U.Operator,c.languages.SymbolKind.Operator],[U.TypeParameter,c.languages.SymbolKind.TypeParameter]]);function Se(e){return ve.get(e)??c.languages.SymbolKind.File}const Ce=new Map([[$.Deprecated,c.languages.SymbolTag.Deprecated]]);function ke(e){return Ce.get(e)}const Re=new Map([[X.Text,c.languages.DocumentHighlightKind.Text],[X.Read,c.languages.DocumentHighlightKind.Read],[X.Write,c.languages.DocumentHighlightKind.Write]]);function Te(e){return e?Re.get(e)??c.languages.DocumentHighlightKind.Text:c.languages.DocumentHighlightKind.Text}const Ie=new Map([[j.Comment,c.languages.FoldingRangeKind.Comment],[j.Imports,c.languages.FoldingRangeKind.Imports],[j.Region,c.languages.FoldingRangeKind.Region]]);function Ee(e){if(e)return Ie.get(e)}const Me=new Map([[c.MarkerSeverity.Error,ee.Error],[c.MarkerSeverity.Warning,ee.Warning],[c.MarkerSeverity.Info,ee.Information],[c.MarkerSeverity.Hint,ee.Hint]]);function Pe(e){return Me.get(e)??ee.Error}const He=new Map([[ee.Error,c.MarkerSeverity.Error],[ee.Warning,c.MarkerSeverity.Warning],[ee.Information,c.MarkerSeverity.Info],[ee.Hint,c.MarkerSeverity.Hint]]);function Fe(e){return e?He.get(e)??c.MarkerSeverity.Error:c.MarkerSeverity.Error}const Le=new Map([[te.Unnecessary,c.MarkerTag.Unnecessary],[te.Deprecated,c.MarkerTag.Deprecated]]),Ke=new Map([[c.languages.SignatureHelpTriggerKind.Invoke,ie.Invoked],[c.languages.SignatureHelpTriggerKind.TriggerCharacter,ie.TriggerCharacter],[c.languages.SignatureHelpTriggerKind.ContentChange,ie.ContentChange]]);function Oe(e){return Ke.get(e)??ie.Invoked}function qe(e){if(e)return{id:e.command,title:e.title,arguments:e.arguments}}const Ae=new Map([[B.Type,c.languages.InlayHintKind.Type],[B.Parameter,c.languages.InlayHintKind.Parameter]]);function Ne(e){return e?Ae.get(e)??c.languages.InlayHintKind.Type:c.languages.InlayHintKind.Type}function ze(e,t){if("targetUri"in e){const n=t.bridge.translateBackRange({uri:e.targetUri},e.targetRange);return{uri:n.textModel.uri,range:n.range,originSelectionRange:e.originSelectionRange?t.bridge.translateBackRange({uri:e.targetUri},e.originSelectionRange).range:void 0,targetSelectionRange:e.targetSelectionRange?t.bridge.translateBackRange({uri:e.targetUri},e.targetSelectionRange).range:void 0}}{const n=t.bridge.translateBackRange({uri:e.uri},e.range);return{uri:n.textModel.uri,range:n.range}}}function We(e){return e&&0!==e.length?e.map((e=>"notebook"in e?"string"==typeof e.notebook?{notebookType:e.notebook,language:e.language}:{notebookType:e.notebook.notebookType,language:e.language,pattern:e.notebook.pattern,scheme:e.notebook.scheme}:{language:e.language,pattern:e.pattern,scheme:e.scheme})):{language:"*"}}function je(e){const t={severity:Fe(e.severity),startLineNumber:e.range.start.line+1,startColumn:e.range.start.character+1,endLineNumber:e.range.end.line+1,endColumn:e.range.end.character+1,message:e.message,source:e.source,code:"string"==typeof e.code?e.code:e.code?.toString()};return e.tags&&(t.tags=e.tags.map((e=>function(e){return Le.get(e)}(e))).filter((e=>void 0!==e))),e.relatedInformation&&(t.relatedInformation=e.relatedInformation.map((e=>({resource:c.Uri.parse(e.location.uri),startLineNumber:e.location.range.start.line+1,startColumn:e.location.range.start.character+1,endLineNumber:e.location.range.end.line+1,endColumn:e.location.range.end.character+1,message:e.message})))),t}var Ue=class extends de{constructor(e){super(),this._connection=e,this._register(this._connection.capabilities.addStaticClientCapabilities({textDocument:{completion:{dynamicRegistration:!0,contextSupport:!0,completionItemKind:{valueSet:Array.from(_e.keys())},completionItem:{tagSupport:{valueSet:Array.from(we.keys())},commitCharactersSupport:!0,deprecatedSupport:!0,preselectSupport:!0}}}})),this._register(this._connection.capabilities.registerCapabilityHandler(ae.textDocumentCompletion,!0,(e=>c.languages.registerCompletionItemProvider(We(e.documentSelector),new $e(this._connection,e)))))}},$e=class{resolveCompletionItem;constructor(e,t){this._client=e,this._capabilities=t,t.resolveProvider&&(this.resolveCompletionItem=async(e,t)=>(Ve(e,await this._client.server.completionItemResolve(e._lspItem),this._client.bridge,e._translated,e._model),e))}get triggerCharacters(){return this._capabilities.triggerCharacters}async provideCompletionItems(e,t,n,i){const r=this._client.bridge.translate(e,t),o=await this._client.server.textDocumentCompletion({textDocument:r.textDocument,position:r.position,context:n.triggerCharacter?{triggerKind:ye(n.triggerKind),triggerCharacter:n.triggerCharacter}:void 0});return o?{suggestions:(Array.isArray(o)?o:o.items).map((n=>({...Be(n,this._client.bridge,r,e,t),_lspItem:n,_translated:r,_model:e})))}:{suggestions:[]}}};function Be(e,t,n,i,r){let o,s=e.insertText||e.label;e.textEdit&&("range"in e.textEdit?(s=e.textEdit.newText,o=le(t.translateBackRange(n.textDocument,e.textEdit.range),i).range):(s=e.textEdit.newText,o={insert:le(t.translateBackRange(n.textDocument,e.textEdit.insert),i).range,replace:le(t.translateBackRange(n.textDocument,e.textEdit.replace),i).range})),o||(o=c.Range.fromPositions(r,r));const a={label:e.label,kind:De(e.kind),insertText:s,sortText:e.sortText,filterText:e.filterText,preselect:e.preselect,commitCharacters:e.commitCharacters,range:o};return Ve(a,e,t,n,i),a}function Ve(e,t,n,i,r){void 0!==t.detail&&(e.detail=t.detail),void 0!==t.documentation&&(e.documentation=function(e){if(e)return"string"==typeof e?e:{value:e.value,isTrusted:!0}}(t.documentation)),void 0!==t.insertTextFormat&&(e.insertTextRules=function(e){if(e)return be.get(e)}(t.insertTextFormat)),t.tags&&t.tags.length>0&&(e.tags=t.tags.map(xe).filter((e=>void 0!==e))),t.additionalTextEdits&&t.additionalTextEdits.length>0&&(e.additionalTextEdits=t.additionalTextEdits.map((e=>({range:le(n.translateBackRange(i.textDocument,e.range),r).range,text:e.newText})))),t.command&&(e.command=qe(t.command))}var Je=class extends de{constructor(e){super(),this._connection=e,this._register(this._connection.capabilities.addStaticClientCapabilities({textDocument:{hover:{dynamicRegistration:!0,contentFormat:[Z.Markdown,Z.PlainText]}}})),this._register(this._connection.capabilities.registerCapabilityHandler(ae.textDocumentHover,!0,(e=>c.languages.registerHoverProvider(We(e.documentSelector),new Ge(this._connection,e)))))}},Ge=class{constructor(e,t){this._client=e,this._capabilities=t}async provideHover(e,t,n){const i=this._client.bridge.translate(e,t),r=await this._client.server.textDocumentHover({textDocument:i.textDocument,position:i.position});return r&&r.contents?{contents:Qe(r.contents),range:r.range?this._client.bridge.translateBackRange(i.textDocument,r.range).range:void 0}:null}};function Qe(e){return Array.isArray(e)?e.map((e=>Xe(e))):[Xe(e)]}function Xe(e){return"string"==typeof e?{value:e,isTrusted:!0}:"kind"in e?{value:e.value,isTrusted:!0}:{value:`\`\`\`${e.language}\n${e.value}\n\`\`\``,isTrusted:!0}}var Ye=class extends de{constructor(e){super(),this._connection=e,this._register(this._connection.capabilities.addStaticClientCapabilities({textDocument:{signatureHelp:{dynamicRegistration:!0,contextSupport:!0,signatureInformation:{documentationFormat:[Z.Markdown,Z.PlainText],parameterInformation:{labelOffsetSupport:!0},activeParameterSupport:!0}}}})),this._register(this._connection.capabilities.registerCapabilityHandler(ae.textDocumentSignatureHelp,!0,(e=>c.languages.registerSignatureHelpProvider(We(e.documentSelector),new Ze(this._connection,e)))))}},Ze=class{signatureHelpTriggerCharacters;signatureHelpRetriggerCharacters;constructor(e,t){this._client=e,this._capabilities=t,this.signatureHelpTriggerCharacters=t.triggerCharacters,this.signatureHelpRetriggerCharacters=t.retriggerCharacters}async provideSignatureHelp(e,t,n,i){const r=this._client.bridge.translate(e,t),o=await this._client.server.textDocumentSignatureHelp({textDocument:r.textDocument,position:r.position,context:{triggerKind:Oe(i.triggerKind),triggerCharacter:i.triggerCharacter,isRetrigger:i.isRetrigger}});return o?{value:{signatures:o.signatures.map((e=>({label:e.label,documentation:et(e.documentation),parameters:e.parameters?.map((e=>({label:e.label,documentation:et(e.documentation)})))||[],activeParameter:e.activeParameter}))),activeSignature:o.activeSignature||0,activeParameter:o.activeParameter||0},dispose:()=>{}}:null}};function et(e){if(e)return"string"==typeof e?e:{value:e.value,isTrusted:!0}}var tt=class extends de{constructor(e){super(),this._connection=e,this._register(this._connection.capabilities.addStaticClientCapabilities({textDocument:{definition:{dynamicRegistration:!0,linkSupport:!0}}})),this._register(this._connection.capabilities.registerCapabilityHandler(ae.textDocumentDefinition,!0,(e=>c.languages.registerDefinitionProvider(We(e.documentSelector),new nt(this._connection,e)))))}},nt=class{constructor(e,t){this._client=e,this._capabilities=t}async provideDefinition(e,t,n){const i=this._client.bridge.translate(e,t),r=await this._client.server.textDocumentDefinition({textDocument:i.textDocument,position:i.position});return r?Array.isArray(r)?r.map((e=>ze(e,this._client))):ze(r,this._client):null}},it=class extends de{constructor(e){super(),this._connection=e,this._register(this._connection.capabilities.addStaticClientCapabilities({textDocument:{declaration:{dynamicRegistration:!0,linkSupport:!0}}})),this._register(this._connection.capabilities.registerCapabilityHandler(ae.textDocumentDeclaration,!0,(e=>c.languages.registerDeclarationProvider(We(e.documentSelector),new rt(this._connection,e)))))}},rt=class{constructor(e,t){this._client=e,this._capabilities=t}async provideDeclaration(e,t,n){const i=this._client.bridge.translate(e,t),r=await this._client.server.textDocumentDeclaration({textDocument:i.textDocument,position:i.position});return r?Array.isArray(r)?r.map((e=>ze(e,this._client))):ze(r,this._client):null}},ot=class extends de{constructor(e){super(),this._connection=e,this._register(this._connection.capabilities.addStaticClientCapabilities({textDocument:{typeDefinition:{dynamicRegistration:!0,linkSupport:!0}}})),this._register(this._connection.capabilities.registerCapabilityHandler(ae.textDocumentTypeDefinition,!0,(e=>c.languages.registerTypeDefinitionProvider(We(e.documentSelector),new st(this._connection,e)))))}},st=class{constructor(e,t){this._client=e,this._capabilities=t}async provideTypeDefinition(e,t,n){const i=this._client.bridge.translate(e,t),r=await this._client.server.textDocumentTypeDefinition({textDocument:i.textDocument,position:i.position});return r?Array.isArray(r)?r.map((e=>ze(e,this._client))):ze(r,this._client):null}},at=class extends de{constructor(e){super(),this._connection=e,this._register(this._connection.capabilities.addStaticClientCapabilities({textDocument:{implementation:{dynamicRegistration:!0,linkSupport:!0}}})),this._register(this._connection.capabilities.registerCapabilityHandler(ae.textDocumentImplementation,!0,(e=>c.languages.registerImplementationProvider(We(e.documentSelector),new ct(this._connection,e)))))}},ct=class{constructor(e,t){this._client=e,this._capabilities=t}async provideImplementation(e,t,n){const i=this._client.bridge.translate(e,t),r=await this._client.server.textDocumentImplementation({textDocument:i.textDocument,position:i.position});return r?Array.isArray(r)?r.map((e=>ze(e,this._client))):ze(r,this._client):null}},lt=class extends de{constructor(e){super(),this._connection=e,this._register(this._connection.capabilities.addStaticClientCapabilities({textDocument:{references:{dynamicRegistration:!0}}})),this._register(this._connection.capabilities.registerCapabilityHandler(ae.textDocumentReferences,!0,(e=>c.languages.registerReferenceProvider(We(e.documentSelector),new dt(this._connection,e)))))}},dt=class{constructor(e,t){this._client=e,this._capabilities=t}async provideReferences(e,t,n,i){const r=this._client.bridge.translate(e,t),o=await this._client.server.textDocumentReferences({textDocument:r.textDocument,position:r.position,context:{includeDeclaration:n.includeDeclaration}});return o?o.map((e=>{const t=this._client.bridge.translateBackRange({uri:e.uri},e.range);return{uri:t.textModel.uri,range:t.range}})):null}},ut=class extends de{constructor(e){super(),this._connection=e,this._register(this._connection.capabilities.addStaticClientCapabilities({textDocument:{documentHighlight:{dynamicRegistration:!0}}})),this._register(this._connection.capabilities.registerCapabilityHandler(ae.textDocumentDocumentHighlight,!0,(e=>c.languages.registerDocumentHighlightProvider(We(e.documentSelector),new gt(this._connection,e)))))}},gt=class{constructor(e,t){this._client=e,this._capabilities=t}async provideDocumentHighlights(e,t,n){const i=this._client.bridge.translate(e,t),r=await this._client.server.textDocumentDocumentHighlight({textDocument:i.textDocument,position:i.position});return r?r.map((e=>({range:this._client.bridge.translateBackRange(i.textDocument,e.range).range,kind:Te(e.kind)}))):null}},mt=class extends de{constructor(e){super(),this._connection=e,this._register(this._connection.capabilities.addStaticClientCapabilities({textDocument:{documentSymbol:{dynamicRegistration:!0,hierarchicalDocumentSymbolSupport:!0,symbolKind:{valueSet:Array.from(ve.keys())},tagSupport:{valueSet:[$.Deprecated]}}}})),this._register(this._connection.capabilities.registerCapabilityHandler(ae.textDocumentDocumentSymbol,!0,(e=>c.languages.registerDocumentSymbolProvider(We(e.documentSelector),new ht(this._connection,e)))))}},ht=class{constructor(e,t){this._client=e,this._capabilities=t}async provideDocumentSymbols(e,t){const n=this._client.bridge.translate(e,new c.Position(1,1)),i=await this._client.server.textDocumentDocumentSymbol({textDocument:n.textDocument});return i?Array.isArray(i)&&i.length>0?"location"in i[0]?i.map((e=>function(e,t){return{name:e.name,detail:"",kind:Se(e.kind),tags:e.tags?.map((e=>ke(e))).filter((e=>void 0!==e))||[],range:t.bridge.translateBackRange({uri:e.location.uri},e.location.range).range,selectionRange:t.bridge.translateBackRange({uri:e.location.uri},e.location.range).range,children:[]}}(e,this._client))):i.map((e=>pt(e,this._client,n.textDocument))):[]:null}};function pt(e,t,n){return{name:e.name,detail:e.detail||"",kind:Se(e.kind),tags:e.tags?.map((e=>ke(e))).filter((e=>void 0!==e))||[],range:t.bridge.translateBackRange(n,e.range).range,selectionRange:t.bridge.translateBackRange(n,e.selectionRange).range,children:e.children?.map((e=>pt(e,t,n)))||[]}}var _t=class extends de{constructor(e){super(),this._connection=e,this._register(this._connection.capabilities.addStaticClientCapabilities({textDocument:{rename:{dynamicRegistration:!0,prepareSupport:!0}}})),this._register(this._connection.capabilities.registerCapabilityHandler(ae.textDocumentRename,!0,(e=>c.languages.registerRenameProvider(We(e.documentSelector),new Dt(this._connection,e)))))}},Dt=class{constructor(e,t){this._client=e,this._capabilities=t}async provideRenameEdits(e,t,n,i){const r=this._client.bridge.translate(e,t),o=await this._client.server.textDocumentRename({textDocument:r.textDocument,position:r.position,newName:n});return o?function(e,t){const n=[];if(e.changes)for(const i in e.changes){const r=e.changes[i];for(const e of r){const r=t.bridge.translateBackRange({uri:i},e.range);n.push({resource:r.textModel.uri,versionId:void 0,textEdit:{range:r.range,text:e.newText}})}}if(e.documentChanges)for(const i of e.documentChanges)if("textDocument"in i){const e=i.textDocument.uri;for(const r of i.edits){const o=t.bridge.translateBackRange({uri:e},r.range);n.push({resource:o.textModel.uri,versionId:i.textDocument.version,textEdit:{range:o.range,text:r.newText}})}}return{edits:n}}(o,this._client):null}async resolveRenameLocation(e,t,n){if(!this._capabilities.prepareProvider)return null;const i=this._client.bridge.translate(e,t),r=await this._client.server.textDocumentPrepareRename({textDocument:i.textDocument,position:i.position});if(!r)return null;if("range"in r&&"placeholder"in r)return{range:this._client.bridge.translateBackRange(i.textDocument,r.range).range,text:r.placeholder};if("defaultBehavior"in r)return null;if("start"in r&&"end"in r){const t=this._client.bridge.translateBackRange(i.textDocument,r).range;return{range:t,text:e.getValueInRange(t)}}return null}},wt=class extends de{constructor(e){super(),this._connection=e,this._register(this._connection.capabilities.addStaticClientCapabilities({textDocument:{codeAction:{dynamicRegistration:!0,codeActionLiteralSupport:{codeActionKind:{valueSet:Array.from(ge.keys())}},isPreferredSupport:!0,disabledSupport:!0,dataSupport:!0,resolveSupport:{properties:["edit"]}}}})),this._register(this._connection.capabilities.registerCapabilityHandler(ae.textDocumentCodeAction,!0,(e=>c.languages.registerCodeActionProvider(We(e.documentSelector),new xt(this._connection,e)))))}},xt=class{resolveCodeAction;constructor(e,t){this._client=e,this._capabilities=t,t.resolveProvider&&(this.resolveCodeAction=async(e,t)=>{if(e._lspAction){const t=await this._client.server.codeActionResolve(e._lspAction);t.edit&&(e.edit=ft(t.edit,this._client)),t.command&&(e.command=qe(t.command))}return e})}async provideCodeActions(e,t,n,i){const r=this._client.bridge.translate(e,t.getStartPosition()),o=await this._client.server.textDocumentCodeAction({textDocument:r.textDocument,range:this._client.bridge.translateRange(e,t),context:{diagnostics:n.markers.map((t=>({range:this._client.bridge.translateRange(e,c.Range.lift(t)),message:t.message,severity:Pe(t.severity)}))),triggerKind:pe(n.trigger)}});return o?{actions:(Array.isArray(o)?o:[o]).map((e=>{if("title"in e&&!("kind"in e)){const t=e;return{title:t.title,command:qe(t)}}{const t=e;return{title:t.title,kind:me(t.kind),isPreferred:t.isPreferred,disabled:t.disabled?.reason,edit:t.edit?ft(t.edit,this._client):void 0,command:qe(t.command),_lspAction:t}}})),dispose:()=>{}}:null}};function ft(e,t){const n=[];if(e.changes)for(const i in e.changes){const r=e.changes[i];for(const e of r){const r=t.bridge.translateBackRange({uri:i},e.range);n.push({resource:r.textModel.uri,versionId:void 0,textEdit:{range:r.range,text:e.newText}})}}if(e.documentChanges)for(const i of e.documentChanges)if("textDocument"in i){const e=i.textDocument.uri;for(const r of i.edits){const o=t.bridge.translateBackRange({uri:e},r.range);n.push({resource:o.textModel.uri,versionId:i.textDocument.version??void 0,textEdit:{range:o.range,text:r.newText}})}}return{edits:n}}var yt=class extends de{constructor(e){super(),this._connection=e,this._register(this._connection.capabilities.addStaticClientCapabilities({textDocument:{codeLens:{dynamicRegistration:!0}}})),this._register(this._connection.capabilities.registerCapabilityHandler(ae.textDocumentCodeLens,!0,(e=>c.languages.registerCodeLensProvider(We(e.documentSelector),new bt(this._connection,e)))))}},bt=class{constructor(e,t){this._client=e,this._capabilities=t}async provideCodeLenses(e,t){const n=this._client.bridge.translate(e,new c.Position(1,1)),i=await this._client.server.textDocumentCodeLens({textDocument:n.textDocument});return i?{lenses:i.map((t=>({range:le(this._client.bridge.translateBackRange(n.textDocument,t.range),e).range,command:qe(t.command),_lspCodeLens:t}))),dispose:()=>{}}:null}async resolveCodeLens(e,t,n){if(!this._capabilities.resolveProvider||!t._lspCodeLens)return t;const i=await this._client.server.codeLensResolve(t._lspCodeLens);return i.command&&(t.command={id:i.command.command,title:i.command.title,arguments:i.command.arguments}),t}},vt=class extends de{constructor(e){super(),this._connection=e,this._register(this._connection.capabilities.addStaticClientCapabilities({textDocument:{documentLink:{dynamicRegistration:!0,tooltipSupport:!0}}})),this._register(this._connection.capabilities.registerCapabilityHandler(ae.textDocumentDocumentLink,!0,(e=>c.languages.registerLinkProvider(We(e.documentSelector),new St(this._connection,e)))))}},St=class{constructor(e,t){this._client=e,this._capabilities=t}async provideLinks(e,t){const n=this._client.bridge.translate(e,new c.Position(1,1)),i=await this._client.server.textDocumentDocumentLink({textDocument:n.textDocument});return i?{links:i.map((e=>({range:this._client.bridge.translateBackRange(n.textDocument,e.range).range,url:e.target,tooltip:e.tooltip})))}:null}async resolveLink(e,t){return this._capabilities.resolveProvider,e}},Ct=class extends de{constructor(e){super(),this._connection=e,this._register(this._connection.capabilities.addStaticClientCapabilities({textDocument:{formatting:{dynamicRegistration:!0}}})),this._register(this._connection.capabilities.registerCapabilityHandler(ae.textDocumentFormatting,!0,(e=>c.languages.registerDocumentFormattingEditProvider(We(e.documentSelector),new kt(this._connection,e)))))}},kt=class{constructor(e,t){this._client=e,this._capabilities=t}async provideDocumentFormattingEdits(e,t,n){const i=this._client.bridge.translate(e,new c.Position(1,1)),r=await this._client.server.textDocumentFormatting({textDocument:i.textDocument,options:{tabSize:t.tabSize,insertSpaces:t.insertSpaces}});return r?r.map((e=>({range:this._client.bridge.translateBackRange(i.textDocument,e.range).range,text:e.newText}))):null}},Rt=class extends de{constructor(e){super(),this._connection=e,this._register(this._connection.capabilities.addStaticClientCapabilities({textDocument:{rangeFormatting:{dynamicRegistration:!0}}})),this._register(this._connection.capabilities.registerCapabilityHandler(ae.textDocumentRangeFormatting,!0,(e=>c.languages.registerDocumentRangeFormattingEditProvider(We(e.documentSelector),new Tt(this._connection,e)))))}},Tt=class{constructor(e,t){this._client=e,this._capabilities=t}async provideDocumentRangeFormattingEdits(e,t,n,i){const r=this._client.bridge.translate(e,t.getStartPosition()),o=await this._client.server.textDocumentRangeFormatting({textDocument:r.textDocument,range:this._client.bridge.translateRange(e,t),options:{tabSize:n.tabSize,insertSpaces:n.insertSpaces}});return o?o.map((e=>({range:this._client.bridge.translateBackRange(r.textDocument,e.range).range,text:e.newText}))):null}},It=class extends de{constructor(e){super(),this._connection=e,this._register(this._connection.capabilities.addStaticClientCapabilities({textDocument:{onTypeFormatting:{dynamicRegistration:!0}}})),this._register(this._connection.capabilities.registerCapabilityHandler(ae.textDocumentOnTypeFormatting,!0,(e=>c.languages.registerOnTypeFormattingEditProvider(We(e.documentSelector),new Et(this._connection,e)))))}},Et=class{autoFormatTriggerCharacters;constructor(e,t){this._client=e,this._capabilities=t,this.autoFormatTriggerCharacters=[t.firstTriggerCharacter,...t.moreTriggerCharacter||[]]}async provideOnTypeFormattingEdits(e,t,n,i,r){const o=this._client.bridge.translate(e,t),s=await this._client.server.textDocumentOnTypeFormatting({textDocument:o.textDocument,position:o.position,ch:n,options:{tabSize:i.tabSize,insertSpaces:i.insertSpaces}});return s?s.map((e=>({range:this._client.bridge.translateBackRange(o.textDocument,e.range).range,text:e.newText}))):null}},Mt=class extends de{constructor(e){super(),this._connection=e,this._register(this._connection.capabilities.addStaticClientCapabilities({textDocument:{foldingRange:{dynamicRegistration:!0,rangeLimit:5e3,lineFoldingOnly:!1,foldingRangeKind:{valueSet:[j.Comment,j.Imports,j.Region]}}}})),this._register(this._connection.capabilities.registerCapabilityHandler(ae.textDocumentFoldingRange,!0,(e=>c.languages.registerFoldingRangeProvider(We(e.documentSelector),new Pt(this._connection,e)))))}},Pt=class{constructor(e,t){this._client=e,this._capabilities=t}async provideFoldingRanges(e,t,n){const i=this._client.bridge.translate(e,new c.Position(1,1)),r=await this._client.server.textDocumentFoldingRange({textDocument:i.textDocument});return r?r.map((e=>({start:e.startLine+1,end:e.endLine+1,kind:Ee(e.kind)}))):null}},Ht=class extends de{constructor(e){super(),this._connection=e,this._register(this._connection.capabilities.addStaticClientCapabilities({textDocument:{selectionRange:{dynamicRegistration:!0}}})),this._register(this._connection.capabilities.registerCapabilityHandler(ae.textDocumentSelectionRange,!0,(e=>c.languages.registerSelectionRangeProvider(We(e.documentSelector),new Ft(this._connection,e)))))}},Ft=class{constructor(e,t){this._client=e,this._capabilities=t}async provideSelectionRanges(e,t,n){const i=this._client.bridge.translate(e,t[0]),r=await this._client.server.textDocumentSelectionRange({textDocument:i.textDocument,positions:t.map((t=>this._client.bridge.translate(e,t).position))});return r?r.map((e=>this.convertSelectionRange(e,i.textDocument))):null}convertSelectionRange(e,t){const n=[];let i=e;for(;i;)n.push({range:this._client.bridge.translateBackRange(t,i.range).range}),i=i.parent;return n}},Lt=class extends de{_providers=new Set;constructor(e){super(),this._connection=e,this._register(this._connection.capabilities.addStaticClientCapabilities({textDocument:{inlayHint:{dynamicRegistration:!0,resolveSupport:{properties:["tooltip","textEdits","label.tooltip","label.location","label.command"]}}},workspace:{inlayHint:{refreshSupport:!0}}})),this._register(this._connection.connection.registerRequestHandler(ce.client.workspaceInlayHintRefresh,(async()=>{for(const e of this._providers)e.refresh();return{ok:null}}))),this._register(this._connection.capabilities.registerCapabilityHandler(ae.textDocumentInlayHint,!0,(e=>{const t=new Kt(this._connection,e);this._providers.add(t);const n=c.languages.registerInlayHintsProvider(We(e.documentSelector),t);return{dispose:()=>{this._providers.delete(t),n.dispose()}}})))}},Kt=class{_onDidChangeInlayHints=new c.Emitter;onDidChangeInlayHints=this._onDidChangeInlayHints.event;resolveInlayHint;constructor(e,t){this._client=e,this._capabilities=t,t.resolveProvider&&(this.resolveInlayHint=async(e,t)=>{const n=await this._client.server.inlayHintResolve(e._lspInlayHint);return n.tooltip&&(e.tooltip=qt(n.tooltip)),n.label!==e._lspInlayHint.label&&(e.label=Ot(n.label)),n.textEdits&&(e.textEdits=n.textEdits.map((t=>({range:this._client.bridge.translateBackRange({uri:e._targetUri},t.range).range,text:t.newText})))),e})}refresh(){this._onDidChangeInlayHints.fire()}async provideInlayHints(e,t,n){const i=this._client.bridge.translate(e,t.getStartPosition()),r=await async function(e){for(let t=3;;t--)try{return await e()}catch(e){if("content modified"===e.message&&t>0)continue;throw e}}((async()=>await this._client.server.textDocumentInlayHint({textDocument:i.textDocument,range:this._client.bridge.translateRange(e,t)})));return r?{hints:r.map((t=>({label:Ot(t.label),position:le(this._client.bridge.translateBack(i.textDocument,t.position),e).position,kind:Ne(t.kind),tooltip:qt(t.tooltip),paddingLeft:t.paddingLeft,paddingRight:t.paddingRight,textEdits:t.textEdits?.map((t=>({range:le(this._client.bridge.translateBackRange(i.textDocument,t.range),e).range,text:t.newText}))),_lspInlayHint:t,_targetUri:i.textDocument.uri}))),dispose:()=>{}}:null}};function Ot(e){return"string"==typeof e?e:e.map((e=>{const t={label:e.value,tooltip:qt(e.tooltip),command:qe(e.command)};return e.location&&(t.location={uri:c.Uri.parse(e.location.uri),range:new c.Range(e.location.range.start.line+1,e.location.range.start.character+1,e.location.range.end.line+1,e.location.range.end.character+1)}),t}))}function qt(e){if(e)return"string"==typeof e?e:{value:e.value,isTrusted:!0}}var At=class extends de{constructor(e){super(),this._connection=e,this._register(this._connection.capabilities.addStaticClientCapabilities({textDocument:{semanticTokens:{dynamicRegistration:!0,requests:{range:!0,full:{delta:!0}},tokenTypes:["namespace","type","class","enum","interface","struct","typeParameter","parameter","variable","property","enumMember","event","function","method","macro","keyword","modifier","comment","string","number","regexp","operator","decorator"],tokenModifiers:["declaration","definition","readonly","static","deprecated","abstract","async","modification","documentation","defaultLibrary"],formats:[oe.Relative],overlappingTokenSupport:!1,multilineTokenSupport:!0}}})),this._register(this._connection.capabilities.registerCapabilityHandler(ae.textDocumentSemanticTokensFull,!0,(e=>c.languages.registerDocumentSemanticTokensProvider(We(e.documentSelector),new Nt(this._connection,e)))))}},Nt=class{constructor(e,t){this._client=e,this._capabilities=t}getLegend(){return{tokenTypes:this._capabilities.legend.tokenTypes,tokenModifiers:this._capabilities.legend.tokenModifiers}}releaseDocumentSemanticTokens(e){}async provideDocumentSemanticTokens(e,t,n){const i=this._client.bridge.translate(e,e.getPositionAt(0)),r=this._capabilities.full;if(t&&r&&"object"==typeof r&&r.delta){const e=await this._client.server.textDocumentSemanticTokensFullDelta({textDocument:i.textDocument,previousResultId:t});return e?"edits"in e?{resultId:e.resultId,edits:e.edits.map((e=>({start:e.start,deleteCount:e.deleteCount,data:e.data?new Uint32Array(e.data):void 0})))}:{resultId:e.resultId,data:new Uint32Array(e.data)}:null}const o=await this._client.server.textDocumentSemanticTokensFull({textDocument:i.textDocument});return o?{resultId:o.resultId,data:new Uint32Array(o.data)}:null}async provideDocumentSemanticTokensEdits(e,t,n){return this.provideDocumentSemanticTokens(e,t,n)}},zt=class extends de{_diagnosticsMarkerOwner="lsp";_pullDiagnosticProviders=new Map;constructor(e){super(),this._connection=e,this._register(this._connection.capabilities.addStaticClientCapabilities({textDocument:{publishDiagnostics:{relatedInformation:!0,tagSupport:{valueSet:[...Le.keys()]},versionSupport:!0,codeDescriptionSupport:!0,dataSupport:!0},diagnostic:{dynamicRegistration:!0,relatedDocumentSupport:!0}}})),this._register(this._connection.connection.registerNotificationHandler(ce.client.textDocumentPublishDiagnostics,(e=>this._handlePublishDiagnostics(e)))),this._register(this._connection.capabilities.registerCapabilityHandler(ae.textDocumentDiagnostic,!0,(e=>{const t=new ue;for(const n of c.editor.getModels())this._addPullDiagnosticProvider(n,e,t);return t.add(c.editor.onDidCreateModel((n=>{this._addPullDiagnosticProvider(n,e,t)}))),t})))}_addPullDiagnosticProvider(e,t,n){if(e.getLanguageId(),!function(e,t){if(!t)return!0;const n=e.getLanguageId();if(e.uri.toString(!0),!t||0===t.length)return!0;for(const e of t)if(!e.language||"*"===e.language||e.language===n)return!0;return!1}(e,t.documentSelector))return;const i=new Wt(e,this._connection,this._diagnosticsMarkerOwner,t);this._pullDiagnosticProviders.set(e,i),n.add(i),n.add(e.onWillDispose((()=>{this._pullDiagnosticProviders.delete(e)})))}_handlePublishDiagnostics(e){const t=e.uri;try{const n=this._connection.bridge.translateBack({uri:t},{line:0,character:0}).textModel;if(!n||n.isDisposed())return;const i=e.diagnostics.map((e=>je(e)));c.editor.setModelMarkers(n,this._diagnosticsMarkerOwner,i)}catch(e){console.debug(`Could not set diagnostics for ${t}:`,e)}}},Wt=class extends de{_updateHandle;_previousResultId;constructor(e,t,n,i){super(),this._model=e,this._connection=t,this._markerOwner=n,this._capability=i,this._register(this._model.onDidChangeContent((()=>{this._scheduleDiagnosticUpdate()}))),this._scheduleDiagnosticUpdate()}_scheduleDiagnosticUpdate(){void 0!==this._updateHandle&&clearTimeout(this._updateHandle),this._updateHandle=window.setTimeout((()=>{this._updateHandle=void 0,this._requestDiagnostics()}),500)}async _requestDiagnostics(){if(!this._model.isDisposed())try{const e=this._connection.bridge.translate(this._model,new c.Position(1,1)),t=await this._connection.server.textDocumentDiagnostic({textDocument:e.textDocument,identifier:this._capability.identifier,previousResultId:this._previousResultId});if(this._model.isDisposed())return;this._handleDiagnosticReport(t)}catch(e){console.error("Error requesting diagnostics:",e)}}_handleDiagnosticReport(e){if("full"===e.kind){this._previousResultId=e.resultId;const t=e.items.map((e=>je(e)));c.editor.setModelMarkers(this._model,this._markerOwner,t),"relatedDocuments"in e&&e.relatedDocuments&&this._handleRelatedDocuments(e.relatedDocuments)}else"unchanged"===e.kind&&(this._previousResultId=e.resultId)}_handleRelatedDocuments(e){for(const[t,n]of Object.entries(e))try{const e=this._connection.bridge.translateBack({uri:t},{line:0,character:0}).textModel;if(!e||e.isDisposed())continue;if("full"===n.kind){const t=n.items.map((e=>je(e)));c.editor.setModelMarkers(e,this._markerOwner,t)}}catch(e){console.debug(`Could not set related diagnostics for ${t}:`,e)}}dispose(){void 0!==this._updateHandle&&(clearTimeout(this._updateHandle),this._updateHandle=void 0),super.dispose()}},jt=class{constructor(e,t,n,i){this.server=e,this.bridge=t,this.capabilities=n,this.connection=i}},Ut=class extends de{_staticCapabilities=new Set;_dynamicFromStatic=Qt.create();_registrations=new Map;_serverCapabilities=void 0;constructor(e){super(),this._connection=e,this._register(this._connection.registerRequestHandler(ce.client.clientRegisterCapability,(async e=>{for(const t of e.registrations){const e=Jt(t.method),n=new Bt(t.id,e,t.registerOptions,!1);this._registerCapabilityOptions(n)}return{ok:null}}))),this._register(this._connection.registerRequestHandler(ce.client.clientUnregisterCapability,(async e=>{for(const t of e.unregisterations){const e=Jt(t.method),n=this._registrations.get(e),i=n?.registrations.get(t.id);if(!i)throw new Error(`No registration for method ${t.method} with id ${t.id}`);i?.handlerDisposables.forEach((e=>e.dispose())),n?.registrations.delete(t.id)}return{ok:null}})))}_registerCapabilityOptions(e){let t=this._registrations.get(e.capability);if(t||(t=new Gt,this._registrations.set(e.capability,t)),t.registrations.has(e.id))throw new Error(`Handler for method ${e.capability.method} with id ${e.id} already registered`);t.registrations.set(e.id,e);for(const n of t.handlers)!n.handleStaticCapability&&e.isFromStatic||e.handlerDisposables.set(n,n.handler(e.options))}setServerCapabilities(e){if(this._serverCapabilities)throw new Error("Server capabilities already set");this._serverCapabilities=e;for(const t of Object.values(ae)){const n=this._dynamicFromStatic.getOptions(t,e);n&&this._registerCapabilityOptions(new Bt(t.method,t,n,!0))}}getClientCapabilities(){const e={};for(const t of this._staticCapabilities)Xt(e,t.cap);return e}addStaticClientCapabilities(e){const t={cap:e};return this._staticCapabilities.add(t),{dispose:()=>{this._staticCapabilities.delete(t)}}}registerCapabilityHandler(e,t,n){let i=this._registrations.get(e);i||(i=new Gt,this._registrations.set(e,i));const r=new $t(e,t,n);i.handlers.add(r);for(const e of i.registrations.values())!r.handleStaticCapability&&e.isFromStatic||e.handlerDisposables.set(r,n(e.options));return{dispose:()=>{i.handlers.delete(r);for(const e of i.registrations.values()){const t=e.handlerDisposables.get(r);t&&(t.dispose(),e.handlerDisposables.delete(r))}}}}},$t=class{constructor(e,t,n){this.capability=e,this.handleStaticCapability=t,this.handler=n}},Bt=class{handlerDisposables=new Map;constructor(e,t,n,i){this.id=e,this.capability=t,this.options=n,this.isFromStatic=i}};const Vt=new Map([...Object.values(ae)].map((e=>[e.method,e])));function Jt(e){const t=Vt.get(e);if(!t)throw new Error(`No capability found for method ${e}`);return t}var Gt=class{handlers=new Set;registrations=new Map},Qt=class e{_mappings=new Map;static create(){const t=new e;return t.set(ae.textDocumentDidChange,(e=>{if(void 0!==e.textDocumentSync)return"object"==typeof e.textDocumentSync?{syncKind:e.textDocumentSync.change??V.None,documentSelector:null}:{syncKind:e.textDocumentSync,documentSelector:null}})),t.set(ae.textDocumentCompletion,(e=>e.completionProvider)),t.set(ae.textDocumentHover,(e=>e.hoverProvider)),t.set(ae.textDocumentSignatureHelp,(e=>e.signatureHelpProvider)),t.set(ae.textDocumentDefinition,(e=>e.definitionProvider)),t.set(ae.textDocumentReferences,(e=>e.referencesProvider)),t.set(ae.textDocumentDocumentHighlight,(e=>e.documentHighlightProvider)),t.set(ae.textDocumentDocumentSymbol,(e=>e.documentSymbolProvider)),t.set(ae.textDocumentCodeAction,(e=>e.codeActionProvider)),t.set(ae.textDocumentCodeLens,(e=>e.codeLensProvider)),t.set(ae.textDocumentDocumentLink,(e=>e.documentLinkProvider)),t.set(ae.textDocumentFormatting,(e=>e.documentFormattingProvider)),t.set(ae.textDocumentRangeFormatting,(e=>e.documentRangeFormattingProvider)),t.set(ae.textDocumentOnTypeFormatting,(e=>e.documentOnTypeFormattingProvider)),t.set(ae.textDocumentRename,(e=>e.renameProvider)),t.set(ae.textDocumentFoldingRange,(e=>e.foldingRangeProvider)),t.set(ae.textDocumentDeclaration,(e=>e.declarationProvider)),t.set(ae.textDocumentTypeDefinition,(e=>e.typeDefinitionProvider)),t.set(ae.textDocumentImplementation,(e=>e.implementationProvider)),t.set(ae.textDocumentDocumentColor,(e=>e.colorProvider)),t.set(ae.textDocumentSelectionRange,(e=>e.selectionRangeProvider)),t.set(ae.textDocumentLinkedEditingRange,(e=>e.linkedEditingRangeProvider)),t.set(ae.textDocumentPrepareCallHierarchy,(e=>e.callHierarchyProvider)),t.set(ae.textDocumentSemanticTokensFull,(e=>e.semanticTokensProvider)),t.set(ae.textDocumentInlayHint,(e=>e.inlayHintProvider)),t.set(ae.textDocumentInlineValue,(e=>e.inlineValueProvider)),t.set(ae.textDocumentDiagnostic,(e=>e.diagnosticProvider)),t.set(ae.textDocumentMoniker,(e=>e.monikerProvider)),t.set(ae.textDocumentPrepareTypeHierarchy,(e=>e.typeHierarchyProvider)),t.set(ae.workspaceSymbol,(e=>e.workspaceSymbolProvider)),t.set(ae.workspaceExecuteCommand,(e=>e.executeCommandProvider)),t}set(e,t){if(this._mappings.has(e.method))throw new Error(`Capability for method ${e.method} already registered`);this._mappings.set(e.method,t)}getOptions(e,t){const n=this._mappings.get(e.method);if(n)return n(t)}};function Xt(e,t){for(const n of Object.keys(t)){const i=t[n];if(void 0===i)continue;const r=e[n];void 0!==r&&"object"==typeof i&&null!==i&&"object"==typeof r&&null!==r?Xt(r,i):e[n]=i}}var Yt=class extends de{_managedModels=new Map;_managedModelsReverse=new Map;_started=!1;constructor(e,t){super(),this._server=e,this._capabilities=t,this._register(this._capabilities.addStaticClientCapabilities({textDocument:{synchronization:{dynamicRegistration:!0,willSave:!1,willSaveWaitUntil:!1,didSave:!1}}})),this._register(t.registerCapabilityHandler(ae.textDocumentDidChange,!0,(e=>{if(this._started)return{dispose:()=>{}};this._started=!0,this._register(c.editor.onDidCreateModel((e=>{this._getOrCreateManagedModel(e)})));for(const e of c.editor.getModels())this._getOrCreateManagedModel(e);return{dispose:()=>{}}})))}_getOrCreateManagedModel(e){if(!this._started)throw new Error("Not started");const t=e.uri.toString(!0).toLowerCase();let n=this._managedModels.get(e);return n||(n=new Zt(e,this._server),this._managedModels.set(e,n),this._managedModelsReverse.set(t,e)),e.onWillDispose((()=>{n.dispose(),this._managedModels.delete(e),this._managedModelsReverse.delete(t)})),n}translateBack(e,t){const n=e.uri.toLowerCase(),i=this._managedModelsReverse.get(n);if(!i)throw new Error(`No text model for uri ${n}`);return{textModel:i,position:new c.Position(t.line+1,t.character+1)}}translateBackRange(e,t){const n=e.uri.toLowerCase(),i=this._managedModelsReverse.get(n);if(!i)throw new Error(`No text model for uri ${n}`);return{textModel:i,range:new c.Range(t.start.line+1,t.start.character+1,t.end.line+1,t.end.character+1)}}translate(e,t){return{textDocument:{uri:e.uri.toString(!0)},position:{line:t.lineNumber-1,character:t.column-1}}}translateRange(e,t){return{start:{line:t.startLineNumber-1,character:t.startColumn-1},end:{line:t.endLineNumber-1,character:t.endColumn-1}}}},Zt=class extends de{constructor(e,t){super(),this._textModel=e,this._api=t;const n=e.uri.toString(!0).toLowerCase();this._api.textDocumentDidOpen({textDocument:{languageId:e.getLanguageId(),uri:n,version:e.getVersionId(),text:e.getValue()}}),this._register(e.onDidChangeContent((t=>{const i=t.changes.map((e=>function(e){return{range:en(e.range),rangeLength:e.rangeLength,text:e.text}}(e)));this._api.textDocumentDidChange({textDocument:{uri:n,version:e.getVersionId()},contentChanges:i})}))),this._register({dispose:()=>{this._api.textDocumentDidClose({textDocument:{uri:n}})}})}};function en(e){return{start:{line:e.startLineNumber-1,character:e.startColumn-1},end:{line:e.endLineNumber-1,character:e.endColumn-1}}}var tn=null;typeof WebSocket<"u"?tn=WebSocket:typeof MozWebSocket<"u"?tn=MozWebSocket:typeof global<"u"?tn=global.WebSocket||global.MozWebSocket:typeof window<"u"?tn=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(tn=self.WebSocket||self.MozWebSocket);var nn=tn,rn=class extends S{_windowLike;_source;_loadingState;_disposed=!1;constructor(e,t=void 0,n=void 0){super(),this._windowLike=e,this._source=t,this._loadingState=n,this._windowLike.addEventListener("message",this._messageHandler)}_messageHandler=({data:e,source:t})=>{this._source&&t!==this._source||"object"==typeof e&&e&&this._dispatchReceivedMessage(e)};async _sendImpl(e){if(this._disposed)throw new Error("Transport is disposed");this._loadingState&&!this._loadingState.loaded&&await this._loadingState.onLoaded,this._windowLike.postMessage(e)}toString(){return`${this.id}@${this._windowLike}`}dispose(){this._disposed||(this._disposed=!0,this._windowLike.removeEventListener("message",this._messageHandler))}};const on=Object.freeze(Object.defineProperty({__proto__:null,MonacoLspClient:class{_connection;_capabilitiesRegistry;_bridge;_initPromise;constructor(e){const t=P.fromTransport(e),n=ce.getServer(t,{});t.startListen(),this._capabilitiesRegistry=new Ut(t),this._bridge=new Yt(n.server,this._capabilitiesRegistry),this._connection=new jt(n.server,this._bridge,this._capabilitiesRegistry,t),this.createFeatures(),this._initPromise=this._init()}async _init(){const e=await this._connection.server.initialize({processId:null,capabilities:this._capabilitiesRegistry.getClientCapabilities(),rootUri:null});this._connection.server.initialized({}),this._capabilitiesRegistry.setServerCapabilities(e.capabilities)}createFeatures(){const e=new ue;return e.add(new Ue(this._connection)),e.add(new Je(this._connection)),e.add(new Ye(this._connection)),e.add(new tt(this._connection)),e.add(new it(this._connection)),e.add(new ot(this._connection)),e.add(new at(this._connection)),e.add(new lt(this._connection)),e.add(new ut(this._connection)),e.add(new mt(this._connection)),e.add(new _t(this._connection)),e.add(new wt(this._connection)),e.add(new yt(this._connection)),e.add(new vt(this._connection)),e.add(new Ct(this._connection)),e.add(new Rt(this._connection)),e.add(new It(this._connection)),e.add(new Mt(this._connection)),e.add(new Ht(this._connection)),e.add(new Lt(this._connection)),e.add(new At(this._connection)),e.add(new zt(this._connection)),e}},WebSocketTransport:class e extends S{socket;static connectTo(t){const n=new nn(function(e){return"host"in e?{address:`${e.forceTls?"wss":"ws"}://${e.host}:${e.port}`}:e}(t).address);return new Promise(((t,i)=>{n.onerror=e=>{i(e)},n.onopen=()=>{t(new e(n))}}))}static fromWebSocket(t){return new e(t)}errorEmitter=new w;onError=this.errorEmitter;constructor(e){super(),this.socket=e,e.onmessage=e=>{try{const t=e.data;if("string"!=typeof t)throw new Error("Not supported");{const e=JSON.parse(t);this._dispatchReceivedMessage(e)}}catch(e){this.errorEmitter.fire({error:e})}},e.onclose=e=>{this._onConnectionClosed()}}close(){this.socket.close()}dispose(){this.close()}_sendImpl(e){const t=JSON.stringify(e);return new Promise(((e,n)=>{this.socket.send(t,(t=>{t?n(t):e()}))}))}toString(){return`${this.id}@${this.socket.url}`}},createTransportToIFrame:function(e){if(typeof window>"u")throw new Error("call this function from the main browser thread");return new rn(e.contentWindow,e.contentWindow,{loaded:"complete"===window.document.readyState,onLoaded:new Promise((e=>{window.addEventListener("load",(()=>e()))}))})},createTransportToWorker:function(e){if(typeof window>"u")throw new Error("call this function from the main browser thread");return new rn(e)}},Symbol.toStringTag,{value:"Module"}));function sn(){return c.monaco}globalThis.MonacoEnvironment?.globalAPI&&(globalThis.monaco=sn());const an=sn();an.languages.css=i.monaco_contribution,an.languages.html=r.monaco_contribution,an.languages.typescript=s.monaco_contribution,an.languages.json=o.monaco_contribution;const cn=Object.freeze(Object.defineProperty({__proto__:null,CancellationTokenSource:c.CancellationTokenSource,Emitter:c.Emitter,KeyCode:c.KeyCode,KeyMod:c.KeyMod,MarkerSeverity:c.MarkerSeverity,MarkerTag:c.MarkerTag,Position:c.Position,Range:c.Range,Selection:c.Selection,SelectionDirection:c.SelectionDirection,Token:c.Token,Uri:c.Uri,createWebWorker:l.createWebWorker,css:i.monaco_contribution,editor:c.editor,html:r.monaco_contribution,json:o.monaco_contribution,languages:c.languages,lsp:on,typescript:s.monaco_contribution},Symbol.toStringTag,{value:"Module"}));function ln(e){"string"!=typeof e&&(e=e.toString());const t=new Blob([["const ttPolicy = globalThis.trustedTypes?.createPolicy('defaultWorkerFactory', { createScriptURL: value => value });","globalThis.workerttPolicy = ttPolicy;",`importScripts(ttPolicy?.createScriptURL(${JSON.stringify(e)}) ?? ${JSON.stringify(e)});`,"globalThis.postMessage({ type: 'vscode-worker-ready' });"].join("")],{type:"application/javascript"});return URL.createObjectURL(t)}typeof globalThis.require<"u"&&"function"==typeof globalThis.require.config&&globalThis.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]}),self.MonacoEnvironment={getWorker:function(e,t){return"json"===t?new Worker(ln(u)):"css"===t||"scss"===t||"less"===t?new Worker(ln(g)):"html"===t||"handlebars"===t||"razor"===t?new Worker(ln(m)):"typescript"===t||"javascript"===t?new Worker(ln(h)):new Worker(ln(p))}},globalThis.monaco=cn;const dn=d.toUrl("vs/editor/editor.main.css"),un=document.createElement("link");un.rel="stylesheet",un.href=dn,document.head.appendChild(un),e.css=i.monaco_contribution,e.html=r.monaco_contribution,e.json=o.monaco_contribution,e.typescript=s.monaco_contribution,e.CancellationTokenSource=c.CancellationTokenSource,e.Emitter=c.Emitter,e.KeyCode=c.KeyCode,e.KeyMod=c.KeyMod,e.MarkerSeverity=c.MarkerSeverity,e.MarkerTag=c.MarkerTag,e.Position=c.Position,e.Range=c.Range,e.Selection=c.Selection,e.SelectionDirection=c.SelectionDirection,e.Token=c.Token,e.Uri=c.Uri,e.editor=c.editor,e.languages=c.languages,e.createWebWorker=l.createWebWorker,e.lsp=on,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));